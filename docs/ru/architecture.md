# Как работает

Система состоит из нескольких модулей:

- **ContestFactory** — главный контракт, создающий новые конкурсы и выдающий каждому конкурсному эскроу адрес для хранения средств.
- **ContestEscrow** — контракт‑клон, в котором хранятся призы. Жюри или создатель объявляют победителей, после чего победители получают награды.
- **NetworkFeeManager** — хранит таблицу комиссий для разных сетей, собирает и распределяет сборы платформы.
- **TokenValidator** — проверяет допустимость токена: есть ли ликвидность, не занесён ли он в чёрный список.
- **PrizeManager** — дополнительный модуль для неденежных призов и интеграции с бэкендом.
- **CreatorBadges** — ERC721‑контракт, выдающий бейджи создателям за активность.

Поток создания конкурса таков:
1. Создатель вызывает `ContestFactory.createContest`, передавая параметры и оплачивая комиссию.
2. Factory клонирует `ContestEscrow`, переводит в него призовые и запускает конкурс.
3. По завершении жюри объявляет победителей в эскроу.
4. Победители получают средства или дополнительные призы через `PrizeManager`.

### Подробности модулей

**ContestFactory**
- Проверяет токены через `TokenValidator` перед созданием конкурса.
- Перечисляет комиссию в `NetworkFeeManager` и выдаёт бейджи создателям.

**ContestEscrow**
- Хранит токены до окончания конкурса.
- Содержит функции `declareWinners` и `claimPrize`.
- Поддерживает экстренное изъятие средств при аварии.

**NetworkFeeManager**
- Хранит ставки комиссий по сетям и список забаненных создателей.
- Позволяет выводить собранные средства в казну.

**PrizeManager**
- Сохраняет метаданные дополнительных призов.
- Может взаимодействовать с бэкендом через события.

**TokenValidator**
- Ведёт белый и чёрный списки токенов.
- Хранит информацию о ликвидности и список стейблкоинов.

**CreatorBadges**
- NFT коллекция, где каждый тип бейджа имеет свой ID.
- Автоматически выдаётся при достижении порогов активности.

Для практического примера взаимодействия смотрите [Как пользоваться](usage.md).
